-- EXERCICI 1

-- 1. Afegir un nou camp a la taula Fitxa
ALTER TABLE fitxa ADD COLUMN equip INTEGER;

-- 2. Inserir registres i comprovar existència
INSERT INTO fitxa (DNI, NOM, COGNOMS, ADREÇA, TELEFON, DATA_NAIX)  
VALUES (3421232, 'LUIS MIGUEL', 'ACEDO GÓMEZ', 'GUZMÁN EL BUENO, 90', '969231256', '1970-05-05');

INSERT INTO fitxa (DNI, NOM, COGNOMS, ADREÇA, TELEFON, PROVINCIA, DATA_NAIX) 
VALUES (4864868, 'BEATRIZ', 'SANCHO MANRIQUE', 'ZURRIAGA, 25', '932321212', 'BCN', '1978-07-06');

-- 3. Eliminar fila amb DNI = 3421223
DELETE FROM fitxa WHERE DNI = 3421223;

-- 4. Inserir fila amb DATA_NAIX per defecte
INSERT INTO fitxa (DNI, NOM, COGNOMS, ADREÇA, TELEFON, DATA_NAIX)  
VALUES (3421232, 'LUIS MIGUEL', 'ACEDO GÓMEZ', 'GUZMÁN EL BUENO, 90', '969231256', DEFAULT);

-- 5. Buida tota la taula
DELETE FROM fitxa;

-- 6. Inserir registres indicant els camps
INSERT INTO fitxa (DNI, NOM, COGNOMS, ADREÇA, TELEFON, DATA_NAIX)  
VALUES (3421232, 'LUIS MIGUEL', 'ACEDO GÓMEZ', 'GUZMÁN EL BUENO, 90', '969231256', '1970-05-05');

INSERT INTO fitxa (DNI, NOM, COGNOMS, ADREÇA, TELEFON, PROVINCIA, DATA_NAIX) 
VALUES (4864868, 'BEATRIZ', 'SANCHO MANRIQUE', 'ZURRIAGA, 25', '932321212', 'BCN', '1978-07-06');

-- EXERCICI 2

-- 1. Inserir registres i fer ROLLBACK
BEGIN;

INSERT INTO fitxa (DNI, NOM, COGNOMS, ADREÇA, TELEFON, equip, PROVINCIA, DATA_NAIX)  
VALUES (7868544, 'JONÁS', 'ALMENDROS RODRIGUEZ', 'FEDERICO PUERTAS, 3', '915478947', 3, 'MADRID', '1987-01-01');

INSERT INTO fitxa (DNI, NOM, COGNOMS, ADREÇA, TELEFON, equip, PROVINCIA, DATA_NAIX)  
VALUES (8324216, 'PEDRO', 'MARTIN HUIGERO', 'VIRGEN DEL CERRO, 154', '961522344', 5, 'SORIA', '1978-04-29');

ROLLBACK;

-- 2. Inserir registres i fer COMMIT
INSERT INTO fitxa (DNI, NOM, COGNOMS, ADREÇA, TELEFON, equip, PROVINCIA, DATA_NAIX)  
VALUES (14948992, 'SANDRA', 'MARTÍN GONZALEZ', 'PABLO NERUDA, 15', '916581515', 6, 'MADRID', '1970-05-05');

COMMIT;

-- 3. Inserir registres amb marques de transacció
INSERT INTO fitxa (DNI, NOM, COGNOMS, ADREÇA, TELEFON, equip, PROVINCIA, DATA_NAIX)  
VALUES (15756214, 'MIGUEL', 'CAMARGO ROMAN', 'ARMADORES, 1', '949488588', 7, NULL, '1985-12-12');

SAVEPOINT intA;

INSERT INTO fitxa (DNI, NOM, COGNOMS, ADREÇA, TELEFON, equip, PROVINCIA, DATA_NAIX)  
VALUES (38624852, 'ANA', 'LOPEZ MARTINEZ', 'CALLE SOL, 5', '914755212', 8, 'SEVILLA', '1990-02-10');

SAVEPOINT intB;

-- 4. Operacions amb marques
DELETE FROM fitxa WHERE DNI = 45824852;
SAVEPOINT intE;

UPDATE fitxa SET equip = 11 WHERE DNI = 48488588;
SAVEPOINT intF;

-- 5. Desfer operacions fins a una marca específica
ROLLBACK TO intE;

-- 6. Desar tots els canvis i tancar sessió
COMMIT;
